{"ast":null,"code":"var _s = $RefreshSig$();\nimport { providers, utils } from \"ethers\";\nimport { useEffect, useState } from \"react\";\nexport const _isMetaMaskInstalled = () => {\n  if (typeof window === \"undefined\") return;\n  const {\n    ethereum\n  } = window;\n  return Boolean(ethereum && ethereum.isMetaMask);\n};\nexport const _getProvider = () => {\n  if (!_isMetaMaskInstalled()) return null;\n  return new providers.Web3Provider(window.ethereum);\n};\nexport const _getChain = async () => {\n  const provider = _getProvider();\n  if (!provider) return -1;\n  return `${(await provider.getNetwork()).chainId}`;\n};\nconst _onAccountsChanged = callback => {\n  if (!_isMetaMaskInstalled()) return;\n  window.ethereum.on(\"accountsChanged\", callback);\n};\nconst _onChainChanged = callback => {\n  if (!_isMetaMaskInstalled()) return;\n  window.ethereum.on(\"chainChanged\", callback);\n};\nexport const _getAddress = async () => {\n  const provider = _getProvider();\n  if (!provider) return null;\n  try {\n    const accounts = await provider.listAccounts();\n    return accounts.length > 0 ? accounts[0] : null;\n  } catch (e) {\n    return null;\n  }\n};\nexport const WalletHook = () => {\n  _s();\n  const [wallet, setWallet] = useState(null);\n  const [chain, setChain] = useState(-1);\n  useEffect(() => {\n    const load = async () => {\n      try {\n        var _await$_getAddress;\n        setWallet((_await$_getAddress = await _getAddress()) === null || _await$_getAddress === void 0 ? void 0 : _await$_getAddress.toLowerCase());\n        setChain(await _getChain());\n      } catch (error) {\n        return error;\n      }\n    };\n    _onAccountsChanged(_address => {\n      if (!_address[0]) return;\n      setWallet(_address[0].toLowerCase());\n    });\n    _onChainChanged(_chain => {\n      if (!_chain) return;\n      setChain(`${parseInt(_chain)}`);\n    });\n    load();\n  }, []);\n  return {\n    wallet,\n    chain\n  };\n};\n_s(WalletHook, \"54ZO1ozZpg10T9WfOOnVuFynuNw=\");\n_c = WalletHook;\nexport const connectMetamask = async () => {\n  if (!_isMetaMaskInstalled()) return false;\n  try {\n    await window.ethereum.request({\n      method: \"eth_requestAccounts\"\n    });\n    return true;\n  } catch (e) {\n    console.log(e);\n    return false;\n  }\n};\nexport const switchToMainnet = async () => {\n  if (!_isMetaMaskInstalled()) return false;\n  try {\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [{\n        chainId: `0x${parseInt(process.env.REACT_APP_CHAIN).toString(16)}`\n      }]\n    });\n    return true;\n  } catch (e) {\n    console.log(e);\n    return false;\n  }\n};\nexport const watchTransaction = (txHash, callback) => {\n  const provider = _getProvider();\n  if (!provider) return;\n  provider.once(txHash, transaction => {\n    callback(transaction, transaction.status === 1);\n  });\n};\n\n// export const parseBigNumber = (bn, decimals = 2) => {\n//   if (!bn) return 0;\n//   try {\n//     return numberWithCommas(\n//       parseFloat(utils.formatUnits(bn)).toFixed(decimals)\n//     );\n//   } catch (e) {\n//     return bn;\n//   }\n// };\n\nexport const parseBigNumber = (bn, decimals = 2) => {\n  if (!bn) return 0;\n  try {\n    return numberWithCommas(parseFloat(utils.formatUnits(bn, \"gwei\")).toFixed(decimals));\n  } catch (e) {\n    return bn;\n  }\n};\nfunction numberWithCommas(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\nvar _c;\n$RefreshReg$(_c, \"WalletHook\");","map":{"version":3,"names":["providers","utils","useEffect","useState","_isMetaMaskInstalled","window","ethereum","Boolean","isMetaMask","_getProvider","Web3Provider","_getChain","provider","getNetwork","chainId","_onAccountsChanged","callback","on","_onChainChanged","_getAddress","accounts","listAccounts","length","e","WalletHook","_s","wallet","setWallet","chain","setChain","load","_await$_getAddress","toLowerCase","error","_address","_chain","parseInt","_c","connectMetamask","request","method","console","log","switchToMainnet","params","process","env","REACT_APP_CHAIN","toString","watchTransaction","txHash","once","transaction","status","parseBigNumber","bn","decimals","numberWithCommas","parseFloat","formatUnits","toFixed","x","replace","$RefreshReg$"],"sources":["/Users/krishna/Documents/Projects/sheep-game/src/utils/ethereum.js"],"sourcesContent":["import { providers, utils } from \"ethers\";\nimport { useEffect, useState } from \"react\";\n\nexport const _isMetaMaskInstalled = () => {\n  if (typeof window === \"undefined\") return;\n  const { ethereum } = window;\n  return Boolean(ethereum && ethereum.isMetaMask);\n};\n\nexport const _getProvider = () => {\n  if (!_isMetaMaskInstalled()) return null;\n  return new providers.Web3Provider(window.ethereum);\n};\n\nexport const _getChain = async () => {\n  const provider = _getProvider();\n  if (!provider) return -1;\n  return `${(await provider.getNetwork()).chainId}`;\n};\n\nconst _onAccountsChanged = (callback) => {\n  if (!_isMetaMaskInstalled()) return;\n  window.ethereum.on(\"accountsChanged\", callback);\n};\n\nconst _onChainChanged = (callback) => {\n  if (!_isMetaMaskInstalled()) return;\n  window.ethereum.on(\"chainChanged\", callback);\n};\n\nexport const _getAddress = async () => {\n  const provider = _getProvider();\n  if (!provider) return null;\n  try {\n    const accounts = await provider.listAccounts();\n    return accounts.length > 0 ? accounts[0] : null;\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const WalletHook = () => {\n  const [wallet, setWallet] = useState(null);\n  const [chain, setChain] = useState(-1);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        setWallet((await _getAddress())?.toLowerCase());\n        setChain(await _getChain());\n      } catch (error) {\n        return error;\n      }\n    };\n\n    _onAccountsChanged((_address) => {\n      if (!_address[0]) return;\n      setWallet(_address[0].toLowerCase());\n    });\n    _onChainChanged((_chain) => {\n      if (!_chain) return;\n      setChain(`${parseInt(_chain)}`);\n    });\n    load();\n  }, []);\n\n  return {\n    wallet,\n    chain,\n  };\n};\n\nexport const connectMetamask = async () => {\n  if (!_isMetaMaskInstalled()) return false;\n  try {\n    await window.ethereum.request({ method: \"eth_requestAccounts\" });\n    return true;\n  } catch (e) {\n    console.log(e);\n    return false;\n  }\n};\n\nexport const switchToMainnet = async () => {\n  if (!_isMetaMaskInstalled()) return false;\n  try {\n    await window.ethereum.request({\n      method: \"wallet_switchEthereumChain\",\n      params: [\n        {\n          chainId: `0x${parseInt(process.env.REACT_APP_CHAIN).toString(16)}`,\n        },\n      ],\n    });\n    return true;\n  } catch (e) {\n    console.log(e);\n    return false;\n  }\n};\n\nexport const watchTransaction = (txHash, callback) => {\n  const provider = _getProvider();\n  if (!provider) return;\n  provider.once(txHash, (transaction) => {\n    callback(transaction, transaction.status === 1);\n  });\n};\n\n// export const parseBigNumber = (bn, decimals = 2) => {\n//   if (!bn) return 0;\n//   try {\n//     return numberWithCommas(\n//       parseFloat(utils.formatUnits(bn)).toFixed(decimals)\n//     );\n//   } catch (e) {\n//     return bn;\n//   }\n// };\n\nexport const parseBigNumber = (bn, decimals = 2) => {\n  if (!bn) return 0;\n  try {\n    return numberWithCommas(\n      parseFloat(utils.formatUnits(bn, \"gwei\")).toFixed(decimals)\n    );\n  } catch (e) {\n    return bn;\n  }\n};\n\nfunction numberWithCommas(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,KAAK,QAAQ,QAAQ;AACzC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EACxC,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;EACnC,MAAM;IAAEC;EAAS,CAAC,GAAGD,MAAM;EAC3B,OAAOE,OAAO,CAACD,QAAQ,IAAIA,QAAQ,CAACE,UAAU,CAAC;AACjD,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAChC,IAAI,CAACL,oBAAoB,CAAC,CAAC,EAAE,OAAO,IAAI;EACxC,OAAO,IAAIJ,SAAS,CAACU,YAAY,CAACL,MAAM,CAACC,QAAQ,CAAC;AACpD,CAAC;AAED,OAAO,MAAMK,SAAS,GAAG,MAAAA,CAAA,KAAY;EACnC,MAAMC,QAAQ,GAAGH,YAAY,CAAC,CAAC;EAC/B,IAAI,CAACG,QAAQ,EAAE,OAAO,CAAC,CAAC;EACxB,OAAQ,GAAE,CAAC,MAAMA,QAAQ,CAACC,UAAU,CAAC,CAAC,EAAEC,OAAQ,EAAC;AACnD,CAAC;AAED,MAAMC,kBAAkB,GAAIC,QAAQ,IAAK;EACvC,IAAI,CAACZ,oBAAoB,CAAC,CAAC,EAAE;EAC7BC,MAAM,CAACC,QAAQ,CAACW,EAAE,CAAC,iBAAiB,EAAED,QAAQ,CAAC;AACjD,CAAC;AAED,MAAME,eAAe,GAAIF,QAAQ,IAAK;EACpC,IAAI,CAACZ,oBAAoB,CAAC,CAAC,EAAE;EAC7BC,MAAM,CAACC,QAAQ,CAACW,EAAE,CAAC,cAAc,EAAED,QAAQ,CAAC;AAC9C,CAAC;AAED,OAAO,MAAMG,WAAW,GAAG,MAAAA,CAAA,KAAY;EACrC,MAAMP,QAAQ,GAAGH,YAAY,CAAC,CAAC;EAC/B,IAAI,CAACG,QAAQ,EAAE,OAAO,IAAI;EAC1B,IAAI;IACF,MAAMQ,QAAQ,GAAG,MAAMR,QAAQ,CAACS,YAAY,CAAC,CAAC;IAC9C,OAAOD,QAAQ,CAACE,MAAM,GAAG,CAAC,GAAGF,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI;EACjD,CAAC,CAAC,OAAOG,CAAC,EAAE;IACV,OAAO,IAAI;EACb;AACF,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACyB,KAAK,EAAEC,QAAQ,CAAC,GAAG1B,QAAQ,CAAC,CAAC,CAAC,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,MAAM4B,IAAI,GAAG,MAAAA,CAAA,KAAY;MACvB,IAAI;QAAA,IAAAC,kBAAA;QACFJ,SAAS,EAAAI,kBAAA,GAAE,MAAMZ,WAAW,CAAC,CAAC,cAAAY,kBAAA,uBAApBA,kBAAA,CAAuBC,WAAW,CAAC,CAAC,CAAC;QAC/CH,QAAQ,CAAC,MAAMlB,SAAS,CAAC,CAAC,CAAC;MAC7B,CAAC,CAAC,OAAOsB,KAAK,EAAE;QACd,OAAOA,KAAK;MACd;IACF,CAAC;IAEDlB,kBAAkB,CAAEmB,QAAQ,IAAK;MAC/B,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE;MAClBP,SAAS,CAACO,QAAQ,CAAC,CAAC,CAAC,CAACF,WAAW,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC;IACFd,eAAe,CAAEiB,MAAM,IAAK;MAC1B,IAAI,CAACA,MAAM,EAAE;MACbN,QAAQ,CAAE,GAAEO,QAAQ,CAACD,MAAM,CAAE,EAAC,CAAC;IACjC,CAAC,CAAC;IACFL,IAAI,CAAC,CAAC;EACR,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLJ,MAAM;IACNE;EACF,CAAC;AACH,CAAC;AAACH,EAAA,CA7BWD,UAAU;AAAAa,EAAA,GAAVb,UAAU;AA+BvB,OAAO,MAAMc,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,IAAI,CAAClC,oBAAoB,CAAC,CAAC,EAAE,OAAO,KAAK;EACzC,IAAI;IACF,MAAMC,MAAM,CAACC,QAAQ,CAACiC,OAAO,CAAC;MAAEC,MAAM,EAAE;IAAsB,CAAC,CAAC;IAChE,OAAO,IAAI;EACb,CAAC,CAAC,OAAOjB,CAAC,EAAE;IACVkB,OAAO,CAACC,GAAG,CAACnB,CAAC,CAAC;IACd,OAAO,KAAK;EACd;AACF,CAAC;AAED,OAAO,MAAMoB,eAAe,GAAG,MAAAA,CAAA,KAAY;EACzC,IAAI,CAACvC,oBAAoB,CAAC,CAAC,EAAE,OAAO,KAAK;EACzC,IAAI;IACF,MAAMC,MAAM,CAACC,QAAQ,CAACiC,OAAO,CAAC;MAC5BC,MAAM,EAAE,4BAA4B;MACpCI,MAAM,EAAE,CACN;QACE9B,OAAO,EAAG,KAAIsB,QAAQ,CAACS,OAAO,CAACC,GAAG,CAACC,eAAe,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAE;MACnE,CAAC;IAEL,CAAC,CAAC;IACF,OAAO,IAAI;EACb,CAAC,CAAC,OAAOzB,CAAC,EAAE;IACVkB,OAAO,CAACC,GAAG,CAACnB,CAAC,CAAC;IACd,OAAO,KAAK;EACd;AACF,CAAC;AAED,OAAO,MAAM0B,gBAAgB,GAAGA,CAACC,MAAM,EAAElC,QAAQ,KAAK;EACpD,MAAMJ,QAAQ,GAAGH,YAAY,CAAC,CAAC;EAC/B,IAAI,CAACG,QAAQ,EAAE;EACfA,QAAQ,CAACuC,IAAI,CAACD,MAAM,EAAGE,WAAW,IAAK;IACrCpC,QAAQ,CAACoC,WAAW,EAAEA,WAAW,CAACC,MAAM,KAAK,CAAC,CAAC;EACjD,CAAC,CAAC;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,cAAc,GAAGA,CAACC,EAAE,EAAEC,QAAQ,GAAG,CAAC,KAAK;EAClD,IAAI,CAACD,EAAE,EAAE,OAAO,CAAC;EACjB,IAAI;IACF,OAAOE,gBAAgB,CACrBC,UAAU,CAACzD,KAAK,CAAC0D,WAAW,CAACJ,EAAE,EAAE,MAAM,CAAC,CAAC,CAACK,OAAO,CAACJ,QAAQ,CAC5D,CAAC;EACH,CAAC,CAAC,OAAOjC,CAAC,EAAE;IACV,OAAOgC,EAAE;EACX;AACF,CAAC;AAED,SAASE,gBAAgBA,CAACI,CAAC,EAAE;EAC3B,OAAOA,CAAC,CAACb,QAAQ,CAAC,CAAC,CAACc,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC;AAC3D;AAAC,IAAAzB,EAAA;AAAA0B,YAAA,CAAA1B,EAAA"},"metadata":{},"sourceType":"module"}